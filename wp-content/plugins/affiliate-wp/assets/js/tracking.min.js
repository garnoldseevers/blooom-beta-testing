jQuery(document).ready(function(e){function i(i,a){e.cookie("affwp_ref",i,{expires:AFFWP.expiration,path:"/"}),e.ajax({type:"POST",data:{action:"affwp_track_visit",affiliate:i,campaign:a,url:document.URL,referrer:document.referrer},url:affwp_scripts.ajaxurl,success:function(i){e.cookie("affwp_ref_visit_id",i,{expires:AFFWP.expiration,path:"/"}),e.cookie("affwp_campaign",a,{expires:AFFWP.expiration,path:"/"})}}).fail(function(e){window.console&&window.console.log&&console.log(e)})}function a(){for(var e,i=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<a.length;o++){e=a[o].split("="),i.push(e[0]);var f="undefined"==typeof e[1]?0:1,n=e[f].indexOf("#");e[f]=e[f].substring(0,-1!=n?n:e[f].length),i[e[0]]=e[f]}return i}var o=e.cookie("affwp_ref"),f=(e.cookie("affwp_ref_visit_id"),e.cookie("affwp_campaign"),AFFWP.referral_credit_last);if("1"==f||!o){var n=a()[AFFWP.referral_var],r=a().campaign;if("undefined"==typeof n){var t=window.location.pathname.split("/");e.each(t,function(e,i){AFFWP.referral_var==i&&(n=t[e+1])})}"undefined"==typeof n||e.isNumeric(n)?n&&!o?i(n,r):"1"==f&&n&&o&&n!==o&&(e.removeCookie("affwp_ref"),i(n,r)):e.ajax({type:"POST",data:{action:"affwp_get_affiliate_id",affiliate:n},url:affwp_scripts.ajaxurl,success:function(a){"1"==a.data.success&&("1"==f&&o&&e.removeCookie("affwp_ref"),i(a.data.affiliate_id,r))}}).fail(function(e){window.console&&window.console.log&&console.log(e)})}});