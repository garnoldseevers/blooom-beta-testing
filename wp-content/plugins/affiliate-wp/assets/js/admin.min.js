jQuery(document).ready(function(e){function a(){var a=e("#affiliate-wp-migrate-user-accounts input:checkbox:checked").length,t=e("#affiliate-wp-migrate-user-accounts input[type=submit]");a>0?t.prop("disabled",!1):t.prop("disabled",!0)}var t;window.formfield="",e("body").on("click",".affwp_settings_upload_button",function(a){a.preventDefault();var r=e(this);return window.formfield=e(this).parent().prev(),t?void t.open():(t=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:r.data("uploader_title"),button:{text:r.data("uploader_button_text")},multiple:!1}),t.on("menu:render:default",function(e){var a={};e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set(a)}),t.on("insert",function(){var e=t.state().get("selection");e.each(function(e){e=e.toJSON(),window.formfield.val(e.url)})}),void t.open())});var t;window.formfield="",e(".affwp-referrals-export-toggle").click(function(){e(".affwp-referrals-export-toggle").toggle(),e("#affwp-referrals-export-form").slideToggle()}),e("#affwp-referrals-export-form").submit(function(){return confirm(affwp_vars.confirm)?void 0:!1}),e(".affwp-datepicker").length&&e(".affwp-datepicker").datepicker();var r;e("body").on("input change",".affwp-user-search",function(){clearTimeout(r),e(".affwp-ajax").hide();var a=e(this).val(),t=e(this).data("affwp-status");r=setTimeout(function(){e(".affwp-ajax").show(),data={action:"affwp_search_users",search:a,status:t},e.ajax({type:"POST",data:data,dataType:"json",url:ajaxurl,success:function(a){if(e(".affwp-ajax").hide(),e("#affwp_user_search_results").html(""),e(a.results).appendTo("#affwp_user_search_results"),e(".affwp-woo-coupon-field").length){var t=e(".affwp-woo-coupon-field #affwp_user_search_results").height();e(".affwp-woo-coupon-field #affwp_user_search_results").css("top","-"+t+"px")}}})},500)}),e("body").on("click.rcpSelectUser","#affwp_user_search_results a",function(a){a.preventDefault();var t=e(this).data("login"),r=e(this).data("id");e("#user_name").val(t),e("#user_id").val(r),e("#affwp_user_search_results").html("")});var t;e("body").on("click",".upload_image_button",function(a){a.preventDefault();var r=e(this).prev();return t?void t.open():(t=wp.media.frames.file_frame=wp.media({frame:"select",title:"Choose Image",multiple:!1,library:{type:"image"},button:{text:"Use Image"}}),t.on("menu:render:default",function(e){var a={};e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set(a)}),t.on("select",function(){var a=t.state().get("selection").first().toJSON();r.val(a.url);var f=e("<img />");f.attr("src",a.url),e("#preview_image").empty().append(f),e("#preview_image img")&&e("#preview_image").show()}),void t.open())}),e("body").on("click",".affiliates_page_affiliate-wp-referrals .delete",function(){return confirm(affwp_vars.confirm_delete_referral)?!0:!1}),a(),e("body").on("change","#affiliate-wp-migrate-user-accounts input:checkbox",function(){a()}),e("#affwp_add_affiliate #status").change(function(){var a=e(this).val();"active"==a?e("#affwp-welcome-email-row").show():(e("#affwp-welcome-email-row").hide(),e("#affwp-welcome-email-row #welcome_email").prop("checked",!1))})});